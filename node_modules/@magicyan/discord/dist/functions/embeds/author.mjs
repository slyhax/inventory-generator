import { Guild, GuildMember, User } from 'discord.js';

function createEmbedAuthor(type, options) {
  const { prefix = "", suffix = "", url, iconURL: icon, extension, forceStatic, size = 1024 } = options ?? {};
  let name = "";
  let iconURL = icon;
  const imageOptions = { extension, forceStatic, size };
  switch (true) {
    case type instanceof User: {
      const { property = "displayName" } = options ?? {};
      name = type[property] ?? type.displayName;
      iconURL = type.displayAvatarURL(imageOptions);
      break;
    }
    case type instanceof GuildMember: {
      const { property = "displayName" } = options ?? {};
      name = (property == "username" || property == "globalName" ? type.user[property] : type[property]) ?? type.displayName;
      iconURL = type.displayAvatarURL(imageOptions);
      break;
    }
    case type instanceof Guild: {
      const { property = "name" } = options ?? {};
      name = type[property];
      iconURL = type.iconURL(imageOptions) ?? void 0;
      break;
    }
  }
  return { name: `${prefix}${name}${suffix}`, url: url?.toString(), iconURL };
}

export { createEmbedAuthor };
