'use strict';

const discord_js = require('discord.js');
const components = require('./components.cjs');

function createModalInput(data) {
  data.style ?? (data.style = discord_js.TextInputStyle.Short);
  return components.createRow(new discord_js.TextInputBuilder(data));
}
function createModalFields(data) {
  return Object.entries(data).map(
    ([customId, data2]) => createModalInput(Object.assign({ customId }, data2))
  );
}
function modalFieldsToRecord(fields) {
  const reduceFunction = (data, { customId, value }) => Object.assign(
    data,
    { [customId]: value }
  );
  const modalFields = fields instanceof discord_js.ModalSubmitInteraction ? fields.fields.fields : "fields" in fields ? fields.fields : fields;
  return modalFields.reduce(reduceFunction, {});
}

exports.createModalFields = createModalFields;
exports.createModalInput = createModalInput;
exports.modalFieldsToRecord = modalFieldsToRecord;
