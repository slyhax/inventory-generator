import { TextInputStyle, TextInputBuilder, ModalSubmitInteraction } from 'discord.js';
import { createRow } from './components.mjs';

function createModalInput(data) {
  data.style ?? (data.style = TextInputStyle.Short);
  return createRow(new TextInputBuilder(data));
}
function createModalFields(data) {
  return Object.entries(data).map(
    ([customId, data2]) => createModalInput(Object.assign({ customId }, data2))
  );
}
function modalFieldsToRecord(fields) {
  const reduceFunction = (data, { customId, value }) => Object.assign(
    data,
    { [customId]: value }
  );
  const modalFields = fields instanceof ModalSubmitInteraction ? fields.fields.fields : "fields" in fields ? fields.fields : fields;
  return modalFields.reduce(reduceFunction, {});
}

export { createModalFields, createModalInput, modalFieldsToRecord };
