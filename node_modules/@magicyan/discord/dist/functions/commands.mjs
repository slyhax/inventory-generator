import { Client, chatInputApplicationCommandMention } from 'discord.js';

function findCommand(guildOrClient) {
  const commands = guildOrClient instanceof Client ? guildOrClient.application.commands.cache : guildOrClient.commands.cache;
  return {
    byName(name, and = () => true) {
      return commands.find((command) => command.name === name && and(command));
    },
    byId(id) {
      return commands.get(id);
    },
    byFilter(filter) {
      return commands.find(filter);
    }
  };
}
function commandMention(command, a, b) {
  const args = [command.name, command.id];
  if (a && b) {
    args.splice(1, 0, a, b);
  }
  if (a && !b) {
    args.splice(1, 0, a);
  }
  return chatInputApplicationCommandMention(...args);
}

export { commandMention, findCommand };
